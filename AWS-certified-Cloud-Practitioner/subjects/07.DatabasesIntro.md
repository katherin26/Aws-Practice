# **DATABASES INTRO**

NOTE: When you are storing data on disk, would it be on an EBS drive, an EBS volume, and EC2 Instance Store, Amazon S3, you have your limits.

If you want to store data in the structure way, you may want to store it in a database. And the structure is going to allow you
to build indexes and to efficiently query or search through the data.

Well we have with EFS EBS, EC2 Instance Store and Amazon S3, we can do per files operations, with databases, it's going to be a lot more structured.

We can define relationships between your datasets.

So this databases nowadays they're all optimized for a purpose, and they will come with different features, shapes and constraints.

From an exam perspective, it's up to you to understand, which database is going to fit best at the use case given to you by the question.

## **RELATIONAL DATABASES**

![Drag Racing](images/RELATIONAL_DATABASE.png)

## **NOSQL DATABASES**

1.  NoSQL = non-SQL = non relational databases.
2.  NoSQL databases are purpose built for specific data models and have flexible schemas for building modern applications.

3.  Benefits:

        a. Flexibility: easy to evolve data model.
        b. Scalability: Designed to scale-out by using distributed clusters.
        c. High-performance: optimized for a specific data model.
        d. Highly functional : types optimized for the data model.

4.  Examples: Key-value, document, graph, in-memory, search databases.

![Drag Racing](images/NoSQL_EXAMPLE.png)

## **DATABASES & SHARED RESPONSIBILITY ON AWS**

1.  AWS offers use to manage different databases.
2.  Benefits include:

        a. Quick Provisioning, High Availability, Vertical and Horizontal Scaling.
        b. Automated Backup & Restore, Operations, Upgrades.
        c. Operating System Patching is handled by AWS.
        d. Monitoring, alerting.

NOTE: Many databases technologies could be run on EC2, but you must handle yourself the resiliency, backup, patching, high, availability, fault, tolerance, scaling...

# **DATABASES - AWS RDS OVERVIEW**

1.  RDS stands for Relational Database Service.
2.  It's a managed DB service for DB use SQL as a query language.
3.  It allows you to create databases in the cloud that are managed by AWS.

        a. Postgres.
        b. MySQL.
        c. MariaDB.
        e. Oracle.
        f. Microsoft SQL Server.
        g. Aurora (AWS Proprietary database).

NOTE: **WHY WOULD WE USE RDS INSTEAD OF DEPLOYING OUR OWN DATABASE ON EC2????**

**ADVANTAGE OVER USING RDS VERSUS DEPLOYING DB ON EC2**

1.  RDS Is a managed service:

        a. Automated provisioning, OS patching. (WILL BE DONE BY AWS)!
        b. Continuos backups and restore to specific timestamp (Point in Time Restore)!!
        c. Monitoring dashboards.
        d. Read replicas for improved read performance.
        e. Multi AZ setup for DR (DISASTER RECOVERY).
        f. Maintenance windows for upgrades.
        g. Scaling capability (vertical and horizontal).
        h. Storage backed by EBS (gp2 or io1) type volume.

IMPORTANT: BUT you can't SSH into your instances, we cannot use the SSH utility to see what's going on within our database.

**RDS SOLUTION ARCHITECTURE**

It's fronting multiple backend EC2 instances, they are possibly into an auto scaling group, and they need to store and share the data somewhere, and this is structured data so they're not going.

To use EBS or EFS or EC2 instance store, they will be using a database. IN THIS EXAMPE IS GOING TO BE SQL DATABASE .
and the EC2 instances will be connecting to database, and doing read/writes and all at once.

So they will be sharing the database in the backend.

![Drag Racing](images/RDS_SOLUTIONS.png)

**AMAZON AURORA**

1. Aurora is a proprietary technology from AWS (not open sourced).
2. PostgreSQL and MySQL are both supported as Aurora DB.
3. Aurora is "AWS cloud optimized" and claims 5x performance improvement over MySQL on RDS, over 3x the performance of Postgres on RDS.
4. Aurora storage automatically grows in increments of 10GB, up to 64 TB.
5. Aurora costs more than RDS **(20% more)** but is more efficient.
6. Not in the free tier.

**DATABASE HANDS ON**

1. Create database.
2. Choose database creation method = Easy Create.

![Drag Racing](images/CREATE_DATABASE.png)

3. Engine Options = MySQL.

![Drag Racing](images/ENGINE_OPTIONS.png)

4.  Edition

        a. MySQL Community.

5.  Templates

        a. Free Tier.

![Drag Racing](images/DATABASE_CREATED.png)

**RDS DEPLOYMENTS : Read Replicas, Multi AZ**

**READ REPLICAS :** That reads from your main RDS database, but say that now you need to scale the read workloads, we have more and more applications. that need to read more and more data from RDS.

The way you can do it is by creating Read Replica, so that means that there is gonna be some copies, SOME REPLICAS OF YOUR RDS DATABASE.

That are going to be created and this is going to allow your applications to read from this read replica also. and therefore
you are distributing the reads, to many different RDS databases.

So you can create up to 5 read replicas, When it comes to writing data, writing data is only done to the main database, so your application still have to write to the only one central RDS database.

**MULTI-AZ**: This is helpful when you have to have failover in case of an AZ outage. So in case in the availability zone, LIKE CRASHES, and this give you high availability.

In this example your applications to read and write from the same main RDS database.
But we are going to set up, a replication crozz AZ, so in another different availability zone.
And this is going to be failover database, and this is why it's called Multi-AZ because it's a different AZ.

Now in case the main RDS database crashes, for whatever reason maybe there's an issue with it, or maybe because the AZ is having problems, then RDS will trigger a failover.

AND THEN your application will failover to developer database in a different AZ.
So in this case, data is only read and written to the main database. The failover DB is passive, it's not accessible until there is an issue, with the main database.

and you can only have one other AZ Zone as a failover AZ.

![Drag Racing](images/RDS_DEPLOYMENTS.png)
